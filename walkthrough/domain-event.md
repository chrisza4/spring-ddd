## Notable Mention

### Change

- แยกโดเมนระหว่าง Warehouse กับ carCollecting แล้ว (ในความเป็นจริงอาจจะอยู่คนละโค้ดกันเลยก็ได้)
- สร้าง EventBus class ขึ้นมา
- แทนที่จะตัดสต็อกโดยตรง ให้ยิงไปที่ EventBus
- โดเมน Warehouse มี class EventHandler ฟัง Eventbus นั้น (ไม่จำเป็นต้องชื่อนี้)
- ที่จุด Startup มีตัวกลาง จัดการให้ EventHandler Subscribe กับ Eventbus ที่รู้ว่าต้องทำอย่างไร

## Comment

- จริงๆ ใน Spring Boot จะมีเครื่องมือเฉพาะอยู่ เช่น Guava, Reactor ผมไม่ได้คล่องใน Ecosystem นี้มาก แต่มีของมัน อันนี้ตั้งใจเลือกจะไม่ใช้เพื่อสาธิต DDD แท้ๆ
- ถ้าใช้ Tool ที่ดีกว่านี้เราอาจจะทำให้ Performance ดีขึ้นโดยการฟัง Event ที่ต้องการเท่านั้นได้ เช่น `Event.Subscribe(CarDropped)` กรองตั้งแต่ระดับ Message Bus ได้ แทนที่จะมากรองในโค้ดตัวเอง ขึ้นกับว่าเราใช้อะไรแล้วเทคโนโลยีตัวนั้นซัพพอร์มั้ย ซึ่งถ้าในสเกลใหญ่การไปฟังทุกอย่างมาแล้ว if เอาเองใน Process ของตัวเราเองก็เปลืองเหมือนกัน อย่าง RabbitMQ มันมี Topic + Channel ใน Kafka ก็มี Topic เหมือนกัน
- จะเห็นว่า Event ก็จะมี Metadata ด้วยเป็นข้อมูลเกี่ยวกับ Event ซึ่งจริงๆ ถ้าโดเมนแยกกัน ควรประกาศไว้ทั้งสองที่ แล้วเวลาคุยกันก็คุยกันผ่านข้อความแบบนึง (ในที่นี้เราใช้ JSON แต่จริงๆ คุณจะใช้ XML, Protobuff หรืออะไรก็ได้) ทำให้แต่ละโดเมนทีมเอาข้อความนั้นไปเฉพาะส่วนที่ตัวเองต้องการ ไม่ใช่ใช้แชร์กัน
